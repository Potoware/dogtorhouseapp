<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es-419">

<head th:replace="compartido/header"></head>

<body id="body-pd">
	<header class="header" id="header">
		<div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
		<h5 class="title-page" th:text="${operacion}"></h5>
		<div class="header_img"> <img src="https://i.imgur.com/hczKIze.jpg" alt=""> </div>
	</header>

	<div class="l-navbar" id="nav-bar" th:replace="compartido/sidebar"></div>

	<div id="hcp" class="container pt-2" style="width: 70%;">

		<div class="parentHD">
			<div class="div1HD" style="border: 0px solid rgb(148, 17, 0); width: 60%; margin: auto;">
				<img src="https://static.wixstatic.com/media/bd01a6_d1d0f18845ea47ca8b009af42e69c879~mv2.png/v1/fill/w_254,h_234,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/actualizaci%C3%83%C2%B3n_logo_dogtor_house_final_M.png"
					style="width: 100%;">
			</div>
			<div class="div2HD"
				style="margin: 2px; text-align: center; background-color: rgb(148, 17, 0);border-radius: 20px 20px 20px 20px; display: flex; justify-content: center; color:white;align-items: center; flex-direction: column;">
				<h3 style="margin: 0;"><b>HISTORIA CLINICA</b></h3>
				<h4 style="margin: 0;" th:text="${paciente.nombre}"></h4>
			</div>


		</div>
		<h4
			style="color: rgb(148, 17, 0); margin-top: 30px; display: flex; justify-content: center; align-items: center;">
			Datos del paciente</h4>


		<div class="parentDP"
			style="border-radius: 20px 0px 0px 20px; border: 1px solid rgb(148, 17, 0); margin-top: 20px;">
			<div class="div1DP">Nombre:</div>
			<div class="div2DP" th:text="${paciente.nombre}"></div>
			<div class="div3DP">Especie:</div>
			<div class="div4DP" th:text="${paciente.especie}"></div>
			<div class="div5DP">Raza:</div>
			<div class="div6DP" th:text="${paciente.raza}"></div>
			<div class="div7DP">Color:</div>
			<div class="div8DP" th:text="${paciente.color}"></div>
			<div class="div9DP">Fecha Nacimiento:</div>
			<div class="div10DP" th:text="${paciente.fechaNacimiento}"></div>
			<div class="div11DP">
				<img id="previewImage"
					th:src="${fotoBytes != null ? 'data:image/' + #strings.replace(#strings.substringAfter(fotoType, '/'), '/', '') + ';base64,' + base64Utils.byteArrayToBase64(fotoBytes) : 'https://i.ibb.co/183N6k6/bg-pc.png'}"
					class="card-img-top img-hc" alt="...">
			</div>
		</div>

		<h4
			style="color: rgb(148, 17, 0); margin-top: 30px; display: flex; justify-content: center; align-items: center;">
			Datos del cliente</h4>

		<div class="parentDM"
			style="border-radius: 20px 0px 0px 20px; border: 1px solid rgb(148, 17, 0); margin-top: 20px;">
			<div class="div1DM">Nombre:</div>
			<div class="div2DM" th:text="${paciente.cliente.nombres +' '+ paciente.cliente.apellidos}"></div>
			<div class="div3DM">Identificaci贸n:</div>
			<div class="div4DM" th:text="${paciente.cliente.identificacion}"></div>
			<div class="div5DM">Email:</div>
			<div class="div6DM" th:text="${paciente.cliente.email}"></div>
			<div class="div7DM">Telefono:</div>
			<div class="div8DM" th:text="${paciente.cliente.telefono}"></div>
			<div class="div9DM">Direcci贸n:</div>
			<div class="div10DM" th:text="${paciente.cliente.direccion}"></div>
			<div class="div11DM">
				<img id=""
					th:src="${fotoCBytes != null ? 'data:image/' + #strings.replace(#strings.substringAfter(fotoType, '/'), '/', '') + ';base64,' + base64Utils.byteArrayToBase64(fotoCBytes) : 'https://i.ibb.co/183N6k6/bg-pc.png'}"
					class="card-img-top img-hc" alt="...">
			</div>
		</div>

		<h4
			style="color: rgb(148, 17, 0); margin-top: 30px; display: flex; justify-content: center; align-items: center;">
			Citas del paciente</h4>

		<div th:each="cita : ${citas}">



			<div class="parentDC">
				<div class="div1DC"
					style="background-color: rgb(148, 17, 0); color:white; text-align:center;max-height: 30px;">
					<h5 th:text="${'Cita '+cita.tipo+' - '+ #temporals.format(cita.fechaHora, 'dd/MM/yyyy hh:mm a')}">
					</h5>
				</div>
				<div class="div2DC">Tipo:</div>
				<div class="div3DC" th:text="${cita.tipo}"> </div>
				<div class="div4DC">Estado:</div>
				<div class="div5DC"
					th:text="${cita.estado == '001' ? 'Valoraci贸n Inicial' : cita.estado == '002' ? 'En progreso' : cita.estado == '003' ? 'Finalizada' : cita.estado == '010' ? 'Cancelada' : ''}">
				</div>
				<div class="div6DC">Fecha: </div>
				<div class="div7DC" th:text="${#temporals.format(cita.fechaHora, 'dd/MM/yyyy hh:mm a')}"></div>
				<div class="div8DC"> Veterinario:</div>
				<div class="div9DC" th:text="${cita.veterinario.nombres +' '+ cita.veterinario.apellidos}"></div>
				<div class="div10DC"><b>Diagnostico: </b>
					<p th:text="${cita.diagnostico}"></p>
				</div>
			</div>


			<div class="parentTR" style="border: 1px solid rgb(148, 17, 0);">
				<div class="div1TR"
					style="background-color: rgb(148, 17, 0); color:white; text-align:center;max-height: 30px;">
					<h5>Tratamiento</h5>
				</div>
				<div class="div2TR" th:text="${cita.tratamiento}"></div>

				<div class="div3TR">
					<p><b>Medicaci贸n:</b></p>
					<p>
					<ul>
						<li th:each="cm : ${cita.medicacion}" th:text="${cm}"></li>
					</ul>
					</p>
				</div>
			</div>


		</div>
	</div>
	<button onclick="imprimirDiv()" class="btn-primary btn"
		style="display: block; margin: 40px auto 0;">Imprimir</button>

	<script>
		function imprimirDiv() {
			var contenido = document.getElementById('hcp').innerHTML;
			var ventanaImpresion = window.open('', '', 'width=1000,height=800');
			ventanaImpresion.document.write('<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>DogtorHouse</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous"><link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet"><link th:href="@{/styles/cssandjs/main.css}" rel="stylesheet" /><link rel="stylesheet" th:href="@{/styles/cssandjs/select2.min.css}" /></head><body><style>.img-hc{  width: 200px;  height: 200px;  object-fit: cover;  border-radius: 20px; /* Aplica un borde redondeado */  margin: 0 auto; /* Centra horizontalmente */}.image-container {  background-color: #ddd; /* Color de fondo gris */  display: flex;  justify-content: center;}.parentHD {display: grid;grid-template-columns: repeat(4, 1fr);grid-template-rows: repeat(2, 1fr);grid-column-gap: 0px;grid-row-gap: 0px;}.div1HD { grid-area: 1 / 1 / 3 / 2; }.div2HD { grid-area: 1 / 2 / 3 / 5; } .parentDP {display: grid;grid-template-columns: repeat(6, 1fr);grid-template-rows: repeat(5, 1fr);grid-column-gap: 0px;grid-row-gap: 0px;border:1px solid rgb(148, 17, 0);margin-top: 20px;}.div1DP { grid-area: 1 / 3 / 2 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div2DP { grid-area: 1 / 5 / 2 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div3DP { grid-area: 2 / 3 / 3 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div4DP { grid-area: 2 / 5 / 3 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div5DP { grid-area: 3 / 3 / 4 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div6DP { grid-area: 3 / 5 / 4 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div7DP { grid-area: 4 / 3 / 5 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div8DP { grid-area: 4 / 5 / 5 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div9DP { grid-area: 5 / 3 / 6 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div10DP { grid-area: 5 / 5 / 6 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center;  justify-content: flex-start;  width: 100%;  padding-left: 15px;}.div11DP { grid-area: 1 / 1 / 6 / 3; }.parentDM {display: grid;grid-template-columns: repeat(6, 1fr);grid-template-rows: repeat(5, 1fr);grid-column-gap: 0px;grid-row-gap: 0px;border:1px solid rgb(148, 17, 0);margin-top: 20px;}.div1DM { grid-area: 1 / 3 / 2 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div2DM { grid-area: 1 / 5 / 2 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div3DM { grid-area: 2 / 3 / 3 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div4DM { grid-area: 2 / 5 / 3 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div5DM { grid-area: 3 / 3 / 4 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div6DM { grid-area: 3 / 5 / 4 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div7DM { grid-area: 4 / 3 / 5 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div8DM { grid-area: 4 / 5 / 5 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div9DM { grid-area: 5 / 3 / 6 / 5; font-weight: bold;border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div10DM { grid-area: 5 / 5 / 6 / 8; border: 0.5px solid rgb(148, 17, 0);  display: flex;  align-items: center; justify-content: flex-start; width: 100%; padding-left: 15px;}.div11DM { grid-area: 1 / 1 / 6 / 3; }.parentDC {display: grid;grid-template-columns: repeat(4, 1fr);grid-template-rows: repeat(5, 1fr);grid-column-gap: 0px;grid-row-gap: 0px;border: 1px solid  rgb(148, 17, 0);margin-top: 20px;}.div1DC { grid-area: 1 / 1 / 2 / 5; }.div2DC { grid-area: 2 / 1 / 3 / 2; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;font-weight: bold;display: flex;  align-items: center; justify-content: flex-start;}.div3DC { grid-area: 2 / 2 / 3 / 3; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;display: flex;  align-items: center; justify-content: flex-start;}.div4DC { grid-area: 3 / 1 / 4 / 2; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;font-weight: bold;display: flex;  align-items: center; justify-content: flex-start;}.div5DC { grid-area: 3 / 2 / 4 / 3; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;display: flex;  align-items: center; justify-content: flex-start;}.div6DC { grid-area: 4 / 1 / 5 / 2; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;font-weight: bold;display: flex;  align-items: center; justify-content: flex-start;}.div7DC { grid-area: 4 / 2 / 5 / 3; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;display: flex;  align-items: center; justify-content: flex-start;}.div8DC { grid-area: 5 / 1 / 6 / 2; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;font-weight: bold;display: flex;  align-items: center; justify-content: flex-start;}.div9DC { grid-area: 5 / 2 / 6 / 3; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px;display: flex;  align-items: center; justify-content: flex-start;}.div10DC { grid-area: 2 / 3 / 6 / 5; border: 0.5px solid rgb(148, 17, 0); padding-left: 15px}.parentTR {display: grid;grid-template-columns: repeat(4, 1fr);grid-template-rows: repeat(5, 1fr);grid-column-gap: 0px;grid-row-gap: 0px;border: 2px solid gray;margin-top: 20px;}.div1TR { grid-area: 1 / 1 / 2 / 5; }.div2TR { grid-area: 2 / 1 / 3 / 5; padding-left: 15px;display: flex;  align-items: center; justify-content: flex-start;}.div3TR { grid-area: 3 / 1 / 4 / 5; padding-left: 15px;display: flex;  align-items: center; justify-content: flex-start;}</style>' + contenido + '</body></html>');
			ventanaImpresion.document.close();

		}
	</script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
		integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
		integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
		crossorigin="anonymous"></script>

</body>

</html>